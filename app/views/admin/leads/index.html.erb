<section class="mx-auto w-full max-w-7xl">
  <div class="admin-page-hero border-cyan-300/20">
    <div class="flex flex-wrap items-start justify-between gap-4">
      <div>
        <p class="text-xs font-semibold uppercase tracking-[0.2em] text-cyan-200/90">Pipeline</p>
        <h1 class="mt-2 font-heading text-3xl font-bold text-white sm:text-4xl">Lead Inbox</h1>
        <p class="mt-2 max-w-2xl text-sm text-slate-200/90">Every enquiry in one queue with quick export and direct detail view.</p>
        <div class="mt-4 flex flex-wrap gap-2">
          <span class="rounded-full border border-white/15 bg-white/[0.04] px-3 py-1 text-xs font-semibold text-slate-100">
            <%= pluralize(@leads.count, "lead") %>
          </span>
          <span class="rounded-full border border-emerald-300/30 bg-emerald-500/10 px-3 py-1 text-xs font-semibold text-emerald-100">
            Newest first
          </span>
        </div>
      </div>

      <div class="flex flex-wrap gap-2">
        <%= link_to "Traffic", admin_visits_path, class: "admin-btn-secondary" %>
        <%= link_to "SMTP Settings", edit_admin_settings_path, class: "admin-btn-secondary" %>
        <%= link_to "Export CSV", export_admin_leads_path(format: :csv), class: "admin-btn-primary" %>
      </div>
    </div>
  </div>

  <div class="admin-table-wrap">
    <table class="min-w-full divide-y divide-white/10 text-sm">
      <thead class="admin-table-head text-left">
        <tr>
          <th class="px-4 py-3">Name</th>
          <th class="px-4 py-3">Email</th>
          <th class="px-4 py-3">Company</th>
          <th class="px-4 py-3">Monthly Spend</th>
          <th class="px-4 py-3">Source</th>
          <th class="px-4 py-3">Received</th>
          <th class="px-4 py-3"></th>
        </tr>
      </thead>
      <tbody class="divide-y divide-white/5 text-slate-100">
        <% @leads.each do |lead| %>
          <tr class="admin-table-row">
            <td class="px-4 py-3 font-semibold text-white"><%= lead.name %></td>
            <td class="px-4 py-3 text-slate-200"><%= lead.email %></td>
            <td class="px-4 py-3 text-slate-300"><%= lead.company.presence || "-" %></td>
            <td class="px-4 py-3 text-slate-300"><%= lead.monthly_spend.present? ? number_to_currency(lead.monthly_spend) : "-" %></td>
            <td class="px-4 py-3 text-slate-300"><%= lead.source_page.presence || "-" %></td>
            <td class="px-4 py-3 text-slate-300"><%= l(lead.created_at, format: :short) %></td>
            <td class="px-4 py-3 text-right">
              <%= link_to "View", admin_lead_path(lead), class: "inline-flex rounded-lg border border-cyan-400/40 bg-cyan-400/10 px-3 py-1 font-semibold text-cyan-200 transition hover:border-cyan-300 hover:bg-cyan-400/20" %>
            </td>
          </tr>
        <% end %>
        <% if @leads.empty? %>
          <tr>
            <td colspan="7" class="px-4 py-10 text-center text-slate-400">No leads yet.</td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
</section>
