services:
  web:
    image: ghcr.io/edward0127/saas_savings_site:latest
    container_name: saas_savings_site
    restart: unless-stopped
    ports:
      - "${APP_PORT_BIND:-3013}:80"
    env_file:
      - .env.prod
    environment:
      RAILS_ENV: production
      RAILS_LOG_TO_STDOUT: "1"
      RAILS_MASTER_KEY: ${RAILS_MASTER_KEY}
      DATABASE_URL: ${DATABASE_URL:-sqlite3:/data/production.sqlite3}
    volumes:
      - saas_savings_storage:/rails/storage
      - saas_savings_db:/data
    # Only keep this if your host specifically needs it
    # security_opt:
    #   - seccomp=unconfined

volumes:
  saas_savings_storage:
  saas_savings_db: